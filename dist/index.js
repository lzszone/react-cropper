!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("react"),require("cropperjs"));else if("function"==typeof define&&define.amd)define(["react","cropperjs"],t);else{var o="object"==typeof exports?t(require("react"),require("cropperjs")):t(e.React,e.Cropper);for(var r in o)("object"==typeof exports?exports:e)[r]=o[r]}}(window,function(e,t){return function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=2)}([function(t,o){t.exports=e},function(e,o){e.exports=t},function(e,t,o){"use strict";o.r(t),o.d(t,"default",function(){return l});var r=o(0),n=o.n(r),i=o(1),a=o.n(i);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var l=function(e){function t(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=function(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?p(e):t}(this,f(t).call(this,e))).state={cropperRef:createRef()},o.confirm=o.confirm.bind(p(p(o))),o.getBaseRatio=o.getBaseRatio.bind(p(p(o))),o.zoomTo=o.zoomTo.bind(p(p(o))),o.handleFileChange=o.handleFileChange.bind(p(p(o))),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,r["Component"]),function(e,t,o){t&&c(e.prototype,t),o&&c(e,o)}(t,[{key:"componentDidMount",value:function(){var e=this.state.cropperRef,t=new a.a(e.current,{aspectRatio:1,cropBoxResizable:!1,dragMode:"move",zoomOnWheel:!1,ready:this.getBaseRatio});this.setState({cropper:t})}},{key:"handleFileChange",value:function(e){var t=this,o=arguments,r=new FileReader;r.readAsDataURL(e),r.onloadend=function(){console.log(o);var e=r.result;t.setState({src:e},function(){return t.getBaseRatio()})}}},{key:"getBaseRatio",value:function(){var e=this,t=this.state.cropper,o=this.props.ratio,r=t.getImageData(),n=r.naturalWidth,i=r.width;this.setState({baseRatio:i/n},function(){return e.zoomTo(o)})}},{key:"zoomTo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.state,o=t.cropper,r=t.baseRatio;o.zoomTo(r*e)}},{key:"confirm",value:function(){var e=this.state.cropper,t=this.props,o=t.toBlob,r=t.toBase64,n=e.getCroppedCanvas({width:640,height:640});r&&r(n.toDataURL("image/jpeg"));if(o&&n.toBlob(function(e){console.log(e),o(e)},"image/jpeg"),!r&&!o)throw new Error("Must specify toBlob or toBase64.")}},{key:"shouldComponentUpdate",value:function(e,t){var o=this.props,r=this.state;return t.src!==r.src||(e.file!==o.file?this.handleFileChange(e.file):e.ratio!==o.ratio&&r.cropper.zoomTo(e.ratio))}},{key:"render",value:function(){var e=this.state,t=e.cropperRef,o=e.src;return n.a.createElement("div",{style:{height:"100%"}},n.a.createElement("img",{src:o,alt:"img",ref:t,width:"320"}))}}]),t}()}])});